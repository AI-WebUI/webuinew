<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <!-- 文档框架样式 -->
    <link rel="stylesheet" type="text/css" href="../../css/base.css"/>
    <link rel="stylesheet" href="../../css/font-awesome.css">
    <!-- highlight -->
    <link rel="stylesheet" type="text/css" href="../../../../webui/1.0.0/pc/css/webui.css">
    <link rel="stylesheet" href="../../css/bootstrap.min.css"/>
    <script type="text/javascript" src="../../../lib/jquery/1.11.3/jquery.js"></script>
    <!--<script type="text/javascript" src="../../js/rainbow.min.js"></script>-->
    <script type="text/javascript" src="../../js/prettify.js"></script>
    <script type="text/javascript" src="../../js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../../webui/1.0.0/pc/js/webui.js"></script>
    <style>
        h1 {
            font-size: 20px;
        }

        h2 {
            font-size: 18px;

        }

        p {
            font-size: 16px;
            display: block;
            padding: 6px 0 6px 2px;
            margin: 20px 0 20px 0;
        }
    </style>
</head>

<body>
<h1 class="main_title">数据表格的各种形式</h1>
<ul class="nav nav-tabs" role="tablist">
<li role="presentation" class="active"><a href="#result" aria-controls="result" role="tab"
data-toggle="tab">样式和参数</a></li>
<li role="presentation"><a href="#Html" aria-controls="Html" role="tab" data-toggle="tab">代码</a></li>
</ul>
<div class="tab-content">
<div role="tabpanel" class="tab-pane active" id="result">
<div class="cont">
<h2>表格表现形式案例</h2>
    <h2>表格组件。类似于html中的table，支持后台数据源、分页、自动列宽、单选/多选、行样式、自定义列渲染等功能。</h2>
    <div class="aries_demo bs-example">
        <p>1.基础表格</p>
        <div class="c_box" >
            <table id="data1"></table>
            <script>
                $(function () {
                    $("#data1").datagrid({
                        width: 781,
                        height: 400,
                        url: 'data/datagrid_data2.json',
                        method: 'get',
                        singleSelect: true,
                        loadMsg: "查询数据请稍候。。。",
//            fitColumns:true,
//            pagination:true,
//                            showFooter: true,
//            fitColumns:true,
                        columns: [[
                            {field: 'itemid', title: '号码', width: 100, editor: 'numberbox', align: 'center'},
                            {field: 'productid', title: '姓名', width: 100, editor: 'text', align: 'center'},
                            {
                                field: 'listprice', title: '地区', width: 135, editor: 'numberbox', align: 'center'
                            },
                            {field: 'unitcost', title: '有效期', width: 100, editor: 'text', align: 'center'},
                            {field: 'attr1', title: '规格', width: 148, editor: 'text', align: 'center'},
                            {field: 'status', title: '状态', width: 158, editor: 'text', align: 'center'},
                            //{field:'togher'}
                        ]]
                    })
                })

            </script>
        </div>

        <p>2.排序表格</p>
        <table id="data2"></table>
        <script>
            $(function () {
                $("#data2").datagrid({
                    width: 789,
                    height: 400,
                    url: 'data/datagrid_data3.json',
                    method: 'get',
                    singleSelect: true,
                    remoteSort: false,
                    sortName: 'productid',
                    sortOrder: 'DESC',
                    columns: [[
                        {field: 'itemid', title: '产品编号', width: 100, editor: 'numberbox', align: 'center'},
                        {
                            field: 'productid',
                            title: '产品id',
                            width: 100,
                            editor: 'text',
                            align: 'center',
                            sortable: true
                        },
                        {
                            field: 'listprice', title: '定价', width: 135, editor: 'numberbox', align: 'center'
                        },
                        {field: 'unitcost', title: '单价成本', width: 100, editor: 'text', align: 'center'},
                        {field: 'attr1', title: '品质', width: 148, editor: 'text', align: 'center'},
                        {field: 'status', title: '状态', width: 158, editor: 'text', align: 'center'},
                    ]]

                })
            })
        </script>
        <p>3.表格编辑</p>
        <table id="dg"></table>
        <script>
            $("#dg").datagrid({
                width:700,
                iconCls: 'icon-edit',
                rownumbers: true,
                singleSelect: true,
                url: 'data/datagrid_data3.json',
                method: 'get',
                toolbar: ["-", {
                    text: '添加',
                    iconCls: 'icon-add',
                    plain: true,
                    handler:function(){
                        append()
                    }
                }, "-", {
                    text: '删除',
                    iconCls: 'icon-remove',
                    handler:function(){
                        removeit()
                    }
                }, "-", {
                    text: '保存',
                    iconCls: 'icon-save',
                    handler:function(){
                        accept()
                    }
                }, "-", {
                    text: '撤销',
                    iconCls: 'icon-undo',
                    handler: function(){
                        reject()
                    }
                }, "-", {
                    text: '更新数据',
                    iconCls: 'icon-search',
                    handler:function(){
                        getChanges()
                    }
                }],
                columns: [[
                    {field: 'itemid', title: '编号ID', width: 100, editor: 'numberbox', align: 'center'},
                    {
                        field: 'productid', title: '产品', width: 80, editor: {
                        type: 'combobox',
                        options: {
                            valueField: 'productid',
                            textField: 'productname',
                            method: 'get',
                            url: 'data/products.json',
                            required: true
                        }, align: 'center', sortable: true
                    }
                    },
                    {
                        field: 'listprice', title: '定价', width: 80, editor:{type:'numberbox',options:{precision:1}}, align: 'center'
                    },
                    {field: 'unitcost', title: '单价成本', width: 80, editor: 'text', align: 'center'},
                    {field: 'attr1', title: '品质', width:150, editor: 'text', align: 'center'},
                    {field: 'status', title: '状态', width: 120, editor: 'text', align: 'center'},
                ]]
            })
            var editIndex = undefined;
            function endEditing() {
                if (editIndex == undefined) {
                    return true
                }
                if ($('#dg').datagrid('validateRow', editIndex)) {
                    var ed = $('#dg').datagrid('getEditor', {index: editIndex, field: 'productid'});
                    var productname = $(ed.target).combobox('getText');
                    $('#dg').datagrid('getRows')[editIndex]['productname'] = productname;
                    $('#dg').datagrid('endEdit', editIndex);
                    editIndex = undefined;
                    return true;
                } else {
                    return false;
                }
            }
            function onClickCell(index, field) {
                if (editIndex != index) {
                    if (endEditing()) {
                        $('#dg').datagrid('selectRow', index)
                                .datagrid('beginEdit', index);
                        var ed = $('#dg').datagrid('getEditor', {index: index, field: field});
                        if (ed) {
                            ($(ed.target).data('textbox') ? $(ed.target).textbox('textbox') : $(ed.target)).focus();
                        }
                        editIndex = index;
                    } else {
                        $('#dg').datagrid('selectRow', editIndex);
                    }
                }
            }
            function append() {
                if (endEditing()) {
                    $('#dg').datagrid('appendRow', {status: 'P'});
                    editIndex = $('#dg').datagrid('getRows').length - 1;
                    $('#dg').datagrid('selectRow', editIndex)
                            .datagrid('beginEdit', editIndex);
                }
            }
            function removeit() {
                if (editIndex == undefined) {
                    return
                }
                $('#dg').datagrid('cancelEdit', editIndex)
                        .datagrid('deleteRow', editIndex);
                editIndex = undefined;
            }
            function accept() {
                if (endEditing()) {
                    $('#dg').datagrid('acceptChanges');
                }
            }
            function reject() {
                $('#dg').datagrid('rejectChanges');
                editIndex = undefined;
            }
            function getChanges() {
                var rows = $('#dg').datagrid('getChanges');
                alert(rows.length + ' rows are changed!');
            }
        </script>
        <p>4.流式数据网格表格</p>
        <table id="data3"></table>
        <script>
            $("#data3").datagrid({
                width:700,
                height:250,
                singleSelect:true,
                collapsible:true,
                url:'data/datagrid_data3.json',
                method:'get',
                columns:[[
                    {field: 'itemid', title: '产品编号', width:"15%",editor: 'numberbox', align: 'center',resizable:false},
                    {
                        field: 'productid',
                        title: '产品id',
                        width: "15%",
                        editor: 'text',
                        align: 'center',
                        sortable: true,
                        resizable:false
                    },
                    {
                        field: 'listprice', title: '定价', width: "15%", editor: 'numberbox', align: 'center',resizable:false
                    },
                    {field: 'unitcost', title: '单价成本', width: "15%", editor: 'text', align: 'center',resizable:false},
                    {field: 'attr1', title: '品质', width: "25%", editor: 'text', align: 'center',resizable:false},
                    {field: 'status', title: '状态', width: "15%", editor: 'text', align: 'center',resizable:false},
                ]]
            })
        </script>
        <p>5.锁定行展现表格</p>
        <table id="data4"></table>
        <script>
            $("#data4").datagrid({
                width:700,
                height:250,
                singleSelect:true,
                collapsible: true,
                rownumbers: true,
                url: 'data/datagrid_data3.json',
                method:'get',
                onLoadSuccess: function(){
                    $(this).datagrid('freezeRow',0).datagrid('freezeRow',1);
                },
                frozenColumns:[[
                    {field:'itemid',title:'产品ID',align:'center',width:100},
                    {field:'productid',title:'名称',align:'center',width:120}
                ]],
                columns:[[
                    {field:'listprice',title:'价格',align:'center',width:90},
                    {field:'unitcost',title:'有效期',align:'center',width:90},
                    {field:'attr1',title:'规格',align:'center',width:230},
                    {field:'status',title:'状态',align:'center',width:60}
                ]]
            })
        </script>
        <p>6.总计工具栏表格</p>
        <table id="data5"></table>
        <script>
            $("#data5").datagrid({
                width:700,
                height:220,
                url:'data/datagrid_data3.json',
                method:'get',
                fitColumns:true,
                singleSelect:true,
                rownumbers:true,
                showFooter:true,
                columns:[[
                    {field: 'itemid', title: '产品ID', width: 80, editor: 'numberbox', align: 'center'},
                    {
                        field: 'productid', title: 'ID', width: 120
                    },
                    {
                        field: 'listprice', title: '价格', width: 80, align: 'center'
                    },
                    {field: 'unitcost', title: '有效期', width: 80, editor: 'text', align: 'center'},
                    {field: 'attr1', title: '规格', width:250, editor: 'text', align: 'center'},
                    {field: 'status', title: '状态', width: 60, editor: 'text', align: 'center'},
                ]]
            })
        </script>
        <p>7.复选框选择</p>
        <table id="data6"></table>
        <script>
            $("#data6").datagrid({
                width:700,
                height:250,
                rownumber:true,
                singleSelect:true,
                url:'data/datagrid_data3.json',
                method:'get',
                columns:[[
                    {field: 'ck',checkbox:true},
                    {field: 'itemid',width:80,title:'产品ID'},
                    {
                        field: 'productid', title: 'ID', width: 100
                    },
                    {
                        field: 'listprice', title: '价格', width: 80, align: 'center'
                    },
                    {field: 'unitcost', title: '有效期', width: 80, editor: 'text', align: 'center'},
                    {field: 'attr1', title: '规格', width:200, editor: 'text', align: 'center'},
                    {field: 'status', title: '状态', width: 60, editor: 'text', align: 'center'},
                ]]
            })
        </script>
        <p>8.分页表格</p>
        <table id="data7"></table>
        <script>
            var data = [];
            for (var i = 1; i <= 800; i++) {
                var amount = Math.floor(Math.random() * 1000);
                var price = Math.floor(Math.random() * 1000);
                data.push({
                    inv: 'Inv No ' + i,
                    date: $.fn.datebox.defaults.formatter(new Date()),
                    name: 'Name ' + i,
                    amount: amount,
                    price: price,
                    cost: amount * price,
                    note: 'Note ' + i
                });
            }
            $(function() {
                $("#data7").datagrid({
                    width: 700,
                    height: 300,
                    singleSelect: true,
                    autoRowHeight: false,
                    rownumbers: true,
                    fitColumns: true,
                    pagination: true,
                    data: data.slice(0, 10),
                    pagination: true,
                    pageSize: 10,
//                        loadFilter:function(data){
//                            pagerFilter()
//                        },
                    columns: [[
                        {field: 'inv', width: 80, title: 'Inv No'},
                        {field: 'date', width: 100, title: 'Date'},
                        {field: 'name', width: 80, title: 'Name'},
                        {field: 'amount', width: 80, title: 'Amount'},
                        {field: 'price', width: 80, title: 'Price'},
                        {field: 'cost', width: 100, title: 'Cost'},
                        {field: 'note', width: 110, title: 'Note'},
                    ]]
                });
                var pager = $("#data7").datagrid("getPager");
                pager.pagination({
                    total: data.length,
                    onSelectPage: function (pageNo, pageSize) {
                        var start = (pageNo - 1) * pageSize;
                        var end = start + pageSize;
                        $("#data7").datagrid("loadData", data.slice(start, end));
                        pager.pagination('refresh', {
                            total: data.length,
                            pageNumber: pageNo
                        });
                    }
                })
            })
        </script>
    </div>
    <div class="code" style="display: none;">
        <p>1.基础表格</p>
        <div class="c_box" >
            <table id="data1"></table>
            <script>
                $(function () {
                    $("#data1").datagrid({
                        width: 781,
                        height: 400,
                        url: 'data/datagrid_data2.json',
                        method: 'get',
                        singleSelect: true,
                        loadMsg: "查询数据请稍候。。。",
//            fitColumns:true,
//            pagination:true,
//                            showFooter: true,
//            fitColumns:true,
                        columns: [[
                            {field: 'itemid', title: '号码', width: 100, editor: 'numberbox', align: 'center'},
                            {field: 'productid', title: '姓名', width: 100, editor: 'text', align: 'center'},
                            {
                                field: 'listprice', title: '地区', width: 135, editor: 'numberbox', align: 'center'
                            },
                            {field: 'unitcost', title: '有效期', width: 100, editor: 'text', align: 'center'},
                            {field: 'attr1', title: '规格', width: 148, editor: 'text', align: 'center'},
                            {field: 'status', title: '状态', width: 158, editor: 'text', align: 'center'},
                            //{field:'togher'}
                        ]]
                    })
                })

            </script>
        </div>

        <p>2.排序表格</p>
        <table id="data2"></table>
        <script>
            $(function () {
                $("#data2").datagrid({
                    width: 789,
                    height: 400,
                    url: 'data/datagrid_data3.json',
                    method: 'get',
                    singleSelect: true,
                    remoteSort: false,
                    sortName: 'productid',
                    sortOrder: 'DESC',
                    columns: [[
                        {field: 'itemid', title: '产品编号', width: 100, editor: 'numberbox', align: 'center'},
                        {
                            field: 'productid',
                            title: '产品id',
                            width: 100,
                            editor: 'text',
                            align: 'center',
                            sortable: true
                        },
                        {
                            field: 'listprice', title: '定价', width: 135, editor: 'numberbox', align: 'center'
                        },
                        {field: 'unitcost', title: '单价成本', width: 100, editor: 'text', align: 'center'},
                        {field: 'attr1', title: '品质', width: 148, editor: 'text', align: 'center'},
                        {field: 'status', title: '状态', width: 158, editor: 'text', align: 'center'},
                    ]]

                })
            })
        </script>
        <p>3.表格编辑</p>
        <table id="dg"></table>
        <script>
            $("#dg").datagrid({
                width:700,
                iconCls: 'icon-edit',
                rownumbers: true,
                singleSelect: true,
                url: 'data/datagrid_data3.json',
                method: 'get',
                toolbar: ["-", {
                    text: '添加',
                    iconCls: 'icon-add',
                    plain: true,
                    handler:function(){
                        append()
                    }
                }, "-", {
                    text: '删除',
                    iconCls: 'icon-remove',
                    handler:function(){
                        removeit()
                    }
                }, "-", {
                    text: '保存',
                    iconCls: 'icon-save',
                    handler:function(){
                        accept()
                    }
                }, "-", {
                    text: '撤销',
                    iconCls: 'icon-undo',
                    handler: function(){
                        reject()
                    }
                }, "-", {
                    text: '更新数据',
                    iconCls: 'icon-search',
                    handler:function(){
                        getChanges()
                    }
                }],
                columns: [[
                    {field: 'itemid', title: '编号ID', width: 100, editor: 'numberbox', align: 'center'},
                    {
                        field: 'productid', title: '产品', width: 80, editor: {
                        type: 'combobox',
                        options: {
                            valueField: 'productid',
                            textField: 'productname',
                            method: 'get',
                            url: 'data/products.json',
                            required: true
                        }, align: 'center', sortable: true
                    }
                    },
                    {
                        field: 'listprice', title: '定价', width: 80, editor:{type:'numberbox',options:{precision:1}}, align: 'center'
                    },
                    {field: 'unitcost', title: '单价成本', width: 80, editor: 'text', align: 'center'},
                    {field: 'attr1', title: '品质', width:150, editor: 'text', align: 'center'},
                    {field: 'status', title: '状态', width: 120, editor: 'text', align: 'center'},
                ]]
            })
            var editIndex = undefined;
            function endEditing() {
                if (editIndex == undefined) {
                    return true
                }
                if ($('#dg').datagrid('validateRow', editIndex)) {
                    var ed = $('#dg').datagrid('getEditor', {index: editIndex, field: 'productid'});
                    var productname = $(ed.target).combobox('getText');
                    $('#dg').datagrid('getRows')[editIndex]['productname'] = productname;
                    $('#dg').datagrid('endEdit', editIndex);
                    editIndex = undefined;
                    return true;
                } else {
                    return false;
                }
            }
            function onClickCell(index, field) {
                if (editIndex != index) {
                    if (endEditing()) {
                        $('#dg').datagrid('selectRow', index)
                                .datagrid('beginEdit', index);
                        var ed = $('#dg').datagrid('getEditor', {index: index, field: field});
                        if (ed) {
                            ($(ed.target).data('textbox') ? $(ed.target).textbox('textbox') : $(ed.target)).focus();
                        }
                        editIndex = index;
                    } else {
                        $('#dg').datagrid('selectRow', editIndex);
                    }
                }
            }
            function append() {
                if (endEditing()) {
                    $('#dg').datagrid('appendRow', {status: 'P'});
                    editIndex = $('#dg').datagrid('getRows').length - 1;
                    $('#dg').datagrid('selectRow', editIndex)
                            .datagrid('beginEdit', editIndex);
                }
            }
            function removeit() {
                if (editIndex == undefined) {
                    return
                }
                $('#dg').datagrid('cancelEdit', editIndex)
                        .datagrid('deleteRow', editIndex);
                editIndex = undefined;
            }
            function accept() {
                if (endEditing()) {
                    $('#dg').datagrid('acceptChanges');
                }
            }
            function reject() {
                $('#dg').datagrid('rejectChanges');
                editIndex = undefined;
            }
            function getChanges() {
                var rows = $('#dg').datagrid('getChanges');
                alert(rows.length + ' rows are changed!');
            }
        </script>
        <p>4.流式数据网格表格</p>
        <table id="data3"></table>
        <script>
            $("#data3").datagrid({
                width:700,
                height:250,
                singleSelect:true,
                collapsible:true,
                url:'data/datagrid_data3.json',
                method:'get',
                columns:[[
                    {field: 'itemid', title: '产品编号', width:"15%",editor: 'numberbox', align: 'center',resizable:false},
                    {
                        field: 'productid',
                        title: '产品id',
                        width: "15%",
                        editor: 'text',
                        align: 'center',
                        sortable: true,
                        resizable:false
                    },
                    {
                        field: 'listprice', title: '定价', width: "15%", editor: 'numberbox', align: 'center',resizable:false
                    },
                    {field: 'unitcost', title: '单价成本', width: "15%", editor: 'text', align: 'center',resizable:false},
                    {field: 'attr1', title: '品质', width: "25%", editor: 'text', align: 'center',resizable:false},
                    {field: 'status', title: '状态', width: "15%", editor: 'text', align: 'center',resizable:false},
                ]]
            })
        </script>
        <p>5.锁定行展现表格</p>
        <table id="data4"></table>
        <script>
            $("#data4").datagrid({
                width:700,
                height:250,
                singleSelect:true,
                collapsible: true,
                rownumbers: true,
                url: 'data/datagrid_data3.json',
                method:'get',
                onLoadSuccess: function(){
                    $(this).datagrid('freezeRow',0).datagrid('freezeRow',1);
                },
                frozenColumns:[[
                    {field:'itemid',title:'产品ID',align:'center',width:100},
                    {field:'productid',title:'名称',align:'center',width:120}
                ]],
                columns:[[
                    {field:'listprice',title:'价格',align:'center',width:90},
                    {field:'unitcost',title:'有效期',align:'center',width:90},
                    {field:'attr1',title:'规格',align:'center',width:230},
                    {field:'status',title:'状态',align:'center',width:60}
                ]]
            })
        </script>
        <p>6.总计工具栏表格</p>
        <table id="data5"></table>
        <script>
            $("#data5").datagrid({
                width:700,
                height:220,
                url:'data/datagrid_data3.json',
                method:'get',
                fitColumns:true,
                singleSelect:true,
                rownumbers:true,
                showFooter:true,
                columns:[[
                    {field: 'itemid', title: '产品ID', width: 80, editor: 'numberbox', align: 'center'},
                    {
                        field: 'productid', title: 'ID', width: 120
                    },
                    {
                        field: 'listprice', title: '价格', width: 80, align: 'center'
                    },
                    {field: 'unitcost', title: '有效期', width: 80, editor: 'text', align: 'center'},
                    {field: 'attr1', title: '规格', width:250, editor: 'text', align: 'center'},
                    {field: 'status', title: '状态', width: 60, editor: 'text', align: 'center'},
                ]]
            })
        </script>
        <p>7.复选框选择</p>
        <table id="data6"></table>
        <script>
            $("#data6").datagrid({
                width:700,
                height:250,
                rownumber:true,
                singleSelect:true,
                url:'data/datagrid_data3.json',
                method:'get',
                columns:[[
                    {field: 'ck',checkbox:true},
                    {field: 'itemid',width:80,title:'产品ID'},
                    {
                        field: 'productid', title: 'ID', width: 100
                    },
                    {
                        field: 'listprice', title: '价格', width: 80, align: 'center'
                    },
                    {field: 'unitcost', title: '有效期', width: 80, editor: 'text', align: 'center'},
                    {field: 'attr1', title: '规格', width:200, editor: 'text', align: 'center'},
                    {field: 'status', title: '状态', width: 60, editor: 'text', align: 'center'},
                ]]
            })
        </script>
        <p>8.分页表格</p>
        <table id="data7"></table>
        <script>
            var data = [];
            for (var i = 1; i <= 800; i++) {
                var amount = Math.floor(Math.random() * 1000);
                var price = Math.floor(Math.random() * 1000);
                data.push({
                    inv: 'Inv No ' + i,
                    date: $.fn.datebox.defaults.formatter(new Date()),
                    name: 'Name ' + i,
                    amount: amount,
                    price: price,
                    cost: amount * price,
                    note: 'Note ' + i
                });
            }
            $(function() {
                $("#data7").datagrid({
                    width: 700,
                    height: 300,
                    singleSelect: true,
                    autoRowHeight: false,
                    rownumbers: true,
                    fitColumns: true,
                    pagination: true,
                    data: data.slice(0, 10),
                    pagination: true,
                    pageSize: 10,
//                        loadFilter:function(data){
//                            pagerFilter()
//                        },
                    columns: [[
                        {field: 'inv', width: 80, title: 'Inv No'},
                        {field: 'date', width: 100, title: 'Date'},
                        {field: 'name', width: 80, title: 'Name'},
                        {field: 'amount', width: 80, title: 'Amount'},
                        {field: 'price', width: 80, title: 'Price'},
                        {field: 'cost', width: 100, title: 'Cost'},
                        {field: 'note', width: 110, title: 'Note'},
                    ]]
                });
                var pager = $("#data7").datagrid("getPager");
                pager.pagination({
                    total: data.length,
                    onSelectPage: function (pageNo, pageSize) {
                        var start = (pageNo - 1) * pageSize;
                        var end = start + pageSize;
                        $("#data7").datagrid("loadData", data.slice(start, end));
                        pager.pagination('refresh', {
                            total: data.length,
                            pageNumber: pageNo
                        });
                    }
                })
            })
        </script>
    </div>
    </div>
</div>
    <div role="tabpanel" class="tab-pane" id="Html">
      <pre class="codes">
      </pre>
    </div>
</div>

</body>
<script>
        var html = $('.code').html();
        $(".codes").text(html).addClass("prettyprint linenums");
        prettyPrint();
</script>
</html>
